{"ast":null,"code":"const useFetch = (request, requestConfig) => {\n  request.setIsLoading(true);\n  request.setError(null);\n  fetch('https://custom-hooks-e72bb-default-rtdb.firebaseio.com/tasks.json', {\n    method: requestConfig.method ? requestConfig.method : 'GET',\n    headers: requestConfig.headers ? requestConfig.headers : {},\n    body: requestConfig.body ? requestConfig.body : null\n  }).then(response => {\n    if (!response.ok) {\n      throw new Error('Request failed!');\n    }\n\n    return response.json();\n  }).then(data => {\n    if (!request.parameter) {\n      const loadedTasks = [];\n\n      for (const taskKey in data) {\n        loadedTasks.push({\n          id: taskKey,\n          text: data[taskKey].text\n        });\n      }\n\n      request.setTasks(loadedTasks);\n    } else {\n      const generatedId = data.name;\n      const createdTask = {\n        id: generatedId,\n        text: request.taskText\n      };\n      request.onAddTask(createdTask);\n    }\n  }).catch(err => {\n    request.setError(err.message || 'Something went wrong!');\n  });\n  request.setIsLoading(false);\n};\n\nexport default useFetch;","map":{"version":3,"names":["useFetch","request","requestConfig","setIsLoading","setError","fetch","method","headers","body","then","response","ok","Error","json","data","parameter","loadedTasks","taskKey","push","id","text","setTasks","generatedId","name","createdTask","taskText","onAddTask","catch","err","message"],"sources":["C:/Users/Sueli Cabral/Desktop/04-onwards-to-a-more-realistic-example/src/hooks/useFetch.js"],"sourcesContent":["const useFetch = (request, requestConfig) => {\r\n    request.setIsLoading(true);\r\n    request.setError(null);\r\n\r\n    fetch('https://custom-hooks-e72bb-default-rtdb.firebaseio.com/tasks.json', {\r\n        method: requestConfig.method ? requestConfig.method : 'GET',\r\n        headers: requestConfig.headers ? requestConfig.headers : {},\r\n        body: requestConfig.body ? requestConfig.body : null,\r\n    })\r\n        .then((response) => {\r\n            if (!response.ok) {\r\n                throw new Error('Request failed!');\r\n            }\r\n\r\n            return response.json();\r\n        })\r\n        .then((data) => {\r\n            if (!request.parameter) {\r\n                const loadedTasks = [];\r\n                for (const taskKey in data) {\r\n                    loadedTasks.push({ id: taskKey, text: data[taskKey].text });\r\n                }\r\n                request.setTasks(loadedTasks);\r\n            } else {\r\n                const generatedId = data.name;\r\n                const createdTask = { id: generatedId, text: request.taskText };\r\n                request.onAddTask(createdTask);\r\n            }\r\n        })\r\n        .catch((err) => {\r\n            request.setError(err.message || 'Something went wrong!');\r\n        });\r\n\r\n    request.setIsLoading(false);\r\n};\r\n\r\nexport default useFetch;\r\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,CAACC,OAAD,EAAUC,aAAV,KAA4B;EACzCD,OAAO,CAACE,YAAR,CAAqB,IAArB;EACAF,OAAO,CAACG,QAAR,CAAiB,IAAjB;EAEAC,KAAK,CAAC,mEAAD,EAAsE;IACvEC,MAAM,EAAEJ,aAAa,CAACI,MAAd,GAAuBJ,aAAa,CAACI,MAArC,GAA8C,KADiB;IAEvEC,OAAO,EAAEL,aAAa,CAACK,OAAd,GAAwBL,aAAa,CAACK,OAAtC,GAAgD,EAFc;IAGvEC,IAAI,EAAEN,aAAa,CAACM,IAAd,GAAqBN,aAAa,CAACM,IAAnC,GAA0C;EAHuB,CAAtE,CAAL,CAKKC,IALL,CAKWC,QAAD,IAAc;IAChB,IAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;MACd,MAAM,IAAIC,KAAJ,CAAU,iBAAV,CAAN;IACH;;IAED,OAAOF,QAAQ,CAACG,IAAT,EAAP;EACH,CAXL,EAYKJ,IAZL,CAYWK,IAAD,IAAU;IACZ,IAAI,CAACb,OAAO,CAACc,SAAb,EAAwB;MACpB,MAAMC,WAAW,GAAG,EAApB;;MACA,KAAK,MAAMC,OAAX,IAAsBH,IAAtB,EAA4B;QACxBE,WAAW,CAACE,IAAZ,CAAiB;UAAEC,EAAE,EAAEF,OAAN;UAAeG,IAAI,EAAEN,IAAI,CAACG,OAAD,CAAJ,CAAcG;QAAnC,CAAjB;MACH;;MACDnB,OAAO,CAACoB,QAAR,CAAiBL,WAAjB;IACH,CAND,MAMO;MACH,MAAMM,WAAW,GAAGR,IAAI,CAACS,IAAzB;MACA,MAAMC,WAAW,GAAG;QAAEL,EAAE,EAAEG,WAAN;QAAmBF,IAAI,EAAEnB,OAAO,CAACwB;MAAjC,CAApB;MACAxB,OAAO,CAACyB,SAAR,CAAkBF,WAAlB;IACH;EACJ,CAxBL,EAyBKG,KAzBL,CAyBYC,GAAD,IAAS;IACZ3B,OAAO,CAACG,QAAR,CAAiBwB,GAAG,CAACC,OAAJ,IAAe,uBAAhC;EACH,CA3BL;EA6BA5B,OAAO,CAACE,YAAR,CAAqB,KAArB;AACH,CAlCD;;AAoCA,eAAeH,QAAf"},"metadata":{},"sourceType":"module"}